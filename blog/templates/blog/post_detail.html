{% extends "templates/base.html" %}
{% load crispy_forms_tags %}
{% block content %}

<div class="containerDetails">
  <div class="cardContainer">
    <div class="title">
      <h2>──── Details ────</h2>
      <img src="{{ post.image.url }}" alt="poster" />
    </div>
    <div class="description">
      <h3>{{ post.title }}</h3>
      <h6>{{ post.date_posted|date:"F d, Y" }}</h6>
      <p>{{ post.content }}</p>
    </div>
    <div class="cardFooter">
      <div><strong>@{{ post.author }}</strong> </div>
      <div class="btnContainer">
        {% if post.author == user %}
        <div>
          <a class="btn btn-secondary btn-sm  " href="{% url 'post-update' post.id %}">
            <i class="fa-solid fa-pen"></i>
          </a>
          <a class="btn btn-danger btn-sm  " href="{% url 'post-delete' post.id %}">
            <i class="fa-solid fa-trash"></i>
          </a>
        </div>
        {% endif %}
      </div>
    </div>
    <div class="detail__counter">
      {% include "blog/likes_area.html" %}
    </div>
    <div class="commentSection">
      <h3>Comments...</h3>
      <form action="" method="POST">
        {% csrf_token %} 
        {% comment %} {{ form }}  {% endcomment %}
        <textarea required name="content" class="form-control" id="{{post.user.id}}" autofocus 
          {% if not post.comments.all %}
            placeholder="No comment yet... add one">
          </textarea>
          {% else %}
            placeholder="Leave a comment here" > 
        </textarea>
        {% endif %}  

        <button type="submit" class="btn btn-success mt-2">Add</button>
        <hr>
      </form> 
 
      {% for comment in post.comments.all %}
      <div class='border rounded p-2 pb-0 mb-2 mt-2'>
        <div class='border-bottom border-secondary p-2 mb-1'>
          {{comment.user}} - <small class='text-secondary'>{{comment.date_added |timesince}} ago</small>
        </div>
        <p>{{comment.content}}</p>
      </div>

      {% endfor %}
    </div>


  </div>
</div>


</div>
{% endblock content %}















{% comment %} ! {% endcomment %}
{% comment %} <div class="row ">
  <h4 class="mb-3">Leave a comment</h4>
  <form method='POST'>
    {% csrf_token %}
    <div class="form-group">
      {{ form.content.label_tag }}
      <textarea required class="form-control {% if form.content.errors %}is-invalid{% endif %}" id="id_content"
        name="content" placeholder="asd" rows="23">
      {{ form.content.value|default:'' }}
    </textarea>
    </div>
    <button class="btn btn-primary mt-2" type="submit">Reply</button>
  </form>
</div> {% endcomment %}
{% comment %} ! {% endcomment %}